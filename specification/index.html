<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Web Extensions</title>
  <meta content="w3c/CG-DRAFT" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <meta content="Bikeshed version 82ce88815, updated Thu Sep 7 16:33:55 2023 -0700" name="generator">
  <link href="https://w3c.github.io/webextensions" rel="canonical">
  <meta content="658a794ac59f014e77a932593950c4188e2ca3a4" name="document-revision">
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Web Extensions</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="2024-06-06">6 June 2024</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://w3c.github.io/webextensions">https://w3c.github.io/webextensions</a>
      <dt>Issue Tracking:
      <dd><a href="https://github.com/w3c/webextensions/issues/">GitHub</a>
      <dd><a href="#issues-index">Inline In Spec</a>
      <dt class="editor">Editors:
      <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:mpurohit@microsoft.com">Mukul Purohit</a> (<a class="p-org org" href="https://www.microsoft.com">Microsoft Corporation</a>)
      <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:tjovanovic@mozilla.com">Tomislav Jovanovic</a> (<a class="p-org org" href="https://www.mozilla.org/">Mozilla</a>)
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 2024 the Contributors to the Web Extensions Specification, published by the <a href="https://www.w3.org/community/webextensions/">WebExtensions Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>[Placeholder] Abstract.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/webextensions/">WebExtensions Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#file-structure"><span class="secno">1</span> <span class="content">File structure</span></a>
     <ol class="toc">
      <li><a href="#manifestjson"><span class="secno">1.1</span> <span class="content">manifest.json</span></a>
      <li><a href="#_locales-subdirectory"><span class="secno">1.2</span> <span class="content">_locales subdirectory</span></a>
      <li><a href="#other-files"><span class="secno">1.3</span> <span class="content">Other files</span></a>
     </ol>
    <li>
     <a href="#manifest"><span class="secno">2</span> <span class="content">Manifest</span></a>
     <ol class="toc">
      <li><a href="#manifest-file"><span class="secno">2.1</span> <span class="content">Manifest file</span></a>
      <li>
       <a href="#manifest-keys"><span class="secno">2.2</span> <span class="content">Manifest keys</span></a>
       <ol class="toc">
        <li><a href="#key-manifest_version"><span class="secno">2.2.1</span> <span class="content">Key <code>manifest_version</code></span></a>
        <li><a href="#key-name"><span class="secno">2.2.2</span> <span class="content">Key <code>name</code></span></a>
        <li><a href="#key-version"><span class="secno">2.2.3</span> <span class="content">Key <code>version</code></span></a>
        <li><a href="#key-permissions"><span class="secno">2.2.4</span> <span class="content">Key <code>permissions</code></span></a>
        <li><a href="#key-optional_permissions"><span class="secno">2.2.5</span> <span class="content">Key <code>optional_permissions</code></span></a>
        <li><a href="#key-host_permissions"><span class="secno">2.2.6</span> <span class="content">Key <code>host_permissions</code></span></a>
        <li><a href="#key-optional_host_permissions"><span class="secno">2.2.7</span> <span class="content">Key <code>optional_host_permissions</code></span></a>
        <li><a href="#key-default_locale"><span class="secno">2.2.8</span> <span class="content">Key <code>default_locale</code></span></a>
        <li><a href="#key-background"><span class="secno">2.2.9</span> <span class="content">Key <code>background</code></span></a>
        <li><a href="#key-commands"><span class="secno">2.2.10</span> <span class="content">Key <code>commands</code></span></a>
        <li><a href="#key-content_scripts"><span class="secno">2.2.11</span> <span class="content">Key <code>content_scripts</code></span></a>
        <li><a href="#key-content_security_policy"><span class="secno">2.2.12</span> <span class="content">Key <code>content_security_policy</code></span></a>
        <li><a href="#key-description"><span class="secno">2.2.13</span> <span class="content">Key <code>description</code></span></a>
        <li><a href="#key-icons"><span class="secno">2.2.14</span> <span class="content">Key <code>icons</code></span></a>
        <li><a href="#key-options_ui"><span class="secno">2.2.15</span> <span class="content">Key <code>options_ui</code></span></a>
        <li><a href="#key-short_name"><span class="secno">2.2.16</span> <span class="content">Key <code>short_name</code></span></a>
        <li><a href="#key-web_accessible_resources"><span class="secno">2.2.17</span> <span class="content">Key <code>web_accessible_resources</code></span></a>
        <li><a href="#key-externally_connectable"><span class="secno">2.2.18</span> <span class="content">Key <code>externally_connectable</code></span></a>
        <li><a href="#key-devtools_page"><span class="secno">2.2.19</span> <span class="content">Key <code>devtools_page</code></span></a>
       </ol>
      <li><a href="#reserved-file-names"><span class="secno">2.3</span> <span class="content">Reserved file names</span></a>
     </ol>
    <li><a href="#isolated-worlds"><span class="secno">3</span> <span class="content">Isolated worlds</span></a>
    <li><a href="#unavailable-apis"><span class="secno">4</span> <span class="content">Unavailable APIs</span></a>
    <li><a href="#the-browser-global"><span class="secno">5</span> <span class="content">The <code>browser</code> global</span></a>
    <li><a href="#extension-origin"><span class="secno">6</span> <span class="content">Extension origin</span></a>
    <li><a href="#localization"><span class="secno">7</span> <span class="content">Localization</span></a>
    <li>
     <a href="#host-permissions"><span class="secno">8</span> <span class="content">Host permissions</span></a>
     <ol class="toc">
      <li><a href="#cross-origin-fetch"><span class="secno">8.1</span> <span class="content">Cross-origin fetch</span></a>
     </ol>
    <li><a href="#match-patterns"><span class="secno">9</span> <span class="content">Match patterns</span></a>
    <li>
     <a href="#concepts"><span class="secno">10</span> <span class="content">Concepts</span></a>
     <ol class="toc">
      <li><a href="#uniqueness-of-extension-ids"><span class="secno">10.1</span> <span class="content">Uniqueness of extension IDs</span></a>
      <li><a href="#promises-and-callbacks"><span class="secno">10.2</span> <span class="content">Promises and callbacks</span></a>
      <li><a href="#user-gestures-and-activetab"><span class="secno">10.3</span> <span class="content">User gestures and activeTab</span></a>
      <li><a href="#extension-permissions-and-web-perissions"><span class="secno">10.4</span> <span class="content">Extension permissions and web perissions</span></a>
     </ol>
    <li><a href="#content-security-policy"><span class="secno">11</span> <span class="content">Content security policy</span></a>
    <li>
     <a href="#architecture"><span class="secno">12</span> <span class="content">Architecture</span></a>
     <ol class="toc">
      <li><a href="#background-content"><span class="secno">12.1</span> <span class="content">Background content</span></a>
      <li>
       <a href="#content-scripts"><span class="secno">12.2</span> <span class="content">Content scripts</span></a>
       <ol class="toc">
        <li><a href="#isolated-worlds①"><span class="secno">12.2.1</span> <span class="content">Isolated worlds</span></a>
       </ol>
      <li><a href="#extension-pages"><span class="secno">12.3</span> <span class="content">Extension pages</span></a>
     </ol>
    <li><a href="#classes-of-security-risk"><span class="secno">13</span> <span class="content">Classes of security risk</span></a>
    <li><a href="#web-accessible-resources"><span class="secno">14</span> <span class="content">Web accessible resources</span></a>
    <li>
     <a href="#interaction-with-the-web"><span class="secno">15</span> <span class="content">Interaction with the web</span></a>
     <ol class="toc">
      <li><a href="#current-behavior-of-cookie-partitioning"><span class="secno">15.1</span> <span class="content">Current behavior of cookie partitioning</span></a>
     </ol>
    <li><a href="#version-number-handling"><span class="secno">16</span> <span class="content">Version number handling</span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="file-structure"><span class="secno">1. </span><span class="content">File structure</span><a class="self-link" href="#file-structure"></a></h2>
   <p>Once unpacked from the distribution format, a WebExtension is a directory containing a number of files.</p>
   <p class="note" role="note"><span class="marker">Note:</span> In some operating systems, filenames are case insensitive. This can lead to naming collisions.</p>
   <h3 class="heading settled" data-level="1.1" id="manifestjson"><span class="secno">1.1. </span><span class="content">manifest.json</span><a class="self-link" href="#manifestjson"></a></h3>
   <p>A <a href="#manifest">Manifest</a> file.</p>
   <h3 class="heading settled" data-level="1.2" id="_locales-subdirectory"><span class="secno">1.2. </span><span class="content">_locales subdirectory</span><a class="self-link" href="#_locales-subdirectory"></a></h3>
   <p>An optional directory containing strings as defined in <a href="#localization">localization</a>.</p>
   <h3 class="heading settled" data-level="1.3" id="other-files"><span class="secno">1.3. </span><span class="content">Other files</span><a class="self-link" href="#other-files"></a></h3>
   <p>An extension may also contain other files, such as those referenced in the <a href="#key-content_scripts">content_scripts</a> and <a href="#key-background">background</a> part of the <a href="#manifest">Manifest</a>.</p>
   <h2 class="heading settled" data-level="2" id="manifest"><span class="secno">2. </span><span class="content">Manifest</span><a class="self-link" href="#manifest"></a></h2>
   <p>A WebExtension must have a manifest file at its root directory.</p>
   <h3 class="heading settled" data-level="2.1" id="manifest-file"><span class="secno">2.1. </span><span class="content">Manifest file</span><a class="self-link" href="#manifest-file"></a></h3>
   <p>A manifest file is a <a data-link-type="biblio" href="#biblio-json" title="The JavaScript Object Notation (JSON) Data Interchange Format">[JSON]</a> document named <code>manifest.json</code>. Malformed JSON files are not supported. Note that some implementors may accept comments, represented by any content following <code>//</code> outside of a JSON string.</p>
   <h3 class="heading settled" data-level="2.2" id="manifest-keys"><span class="secno">2.2. </span><span class="content">Manifest keys</span><a class="self-link" href="#manifest-keys"></a></h3>
   <p>If manifest keys that are not defined in this specification are specified, implementors must ignore those keys.</p>
   <p>If manifest keys that are defined in this specification are specified with a different JSON type than defined in this specification, implementors must ignore those keys.</p>
   <p>The following keys must be considered valid:</p>
   <ul>
    <li data-md>
     <p><a href="#key-manifest_version"><code>manifest_version</code></a>: required.</p>
    <li data-md>
     <p><a href="#key-name"><code>name</code></a>: required.</p>
    <li data-md>
     <p><a href="#key-version"><code>version</code></a>: required.</p>
    <li data-md>
     <p><a href="#key-default_locale"><code>default_locale</code></a>: required under some conditions.</p>
    <li data-md>
     <p><a href="#key-background"><code>background</code></a>: optional</p>
    <li data-md>
     <p><a href="#key-commands"><code>commands</code></a>: optional</p>
    <li data-md>
     <p><a href="#key-content_scripts"><code>content_scripts</code></a>: optional</p>
    <li data-md>
     <p><a href="#key-content_security_policy"><code>content_security_policy</code></a>: optional</p>
    <li data-md>
     <p><a href="#key-description"><code>description</code></a>: optional</p>
    <li data-md>
     <p><a href="#key-icons"><code>icons</code></a>: optional</p>
    <li data-md>
     <p><a href="#key-optional_permissions"><code>optional_permissions</code></a>: optional</p>
    <li data-md>
     <p><a href="#key-options_ui"><code>options_ui</code></a>: optional</p>
    <li data-md>
     <p><a href="#key-permissions"><code>permissions</code></a>: optional</p>
    <li data-md>
     <p><a href="#key-short_name"><code>short_name</code></a>: optional</p>
    <li data-md>
     <p><a href="#key-web_accessible_resources"><code>web_accessible_resources</code></a>: optional</p>
    <li data-md>
     <p><a href="#key-devtools_page"><code>devtools_page</code></a>: optional</p>
    <li data-md>
     <p><a href="#key-externally_connectable"><code>externally_connectable</code></a>: optional</p>
   </ul>
   <p>The following keys must be considered valid in Manifest V3:</p>
   <ul>
    <li data-md>
     <p><a href="#key-host_permissions"><code>host_permissions</code></a>: optional</p>
    <li data-md>
     <p><a href="#key-optional_host_permissions"><code>optional_host_permissions</code></a>: optional</p>
   </ul>
   <h4 class="heading settled" data-level="2.2.1" id="key-manifest_version"><span class="secno">2.2.1. </span><span class="content">Key <code>manifest_version</code></span><a class="self-link" href="#key-manifest_version"></a></h4>
   <p>This key must be present.</p>
   <h4 class="heading settled" data-level="2.2.2" id="key-name"><span class="secno">2.2.2. </span><span class="content">Key <code>name</code></span><a class="self-link" href="#key-name"></a></h4>
   <p>Name of the extension used in the browser’s user interface. This should be the full name used to identify the extension. See also <a href="#key-short_name"><code>short_name</code></a>.</p>
   <p>This key must be present. This property can be localized.</p>
   <h4 class="heading settled" data-level="2.2.3" id="key-version"><span class="secno">2.2.3. </span><span class="content">Key <code>version</code></span><a class="self-link" href="#key-version"></a></h4>
   <p>This key must be present.</p>
   <h4 class="heading settled" data-level="2.2.4" id="key-permissions"><span class="secno">2.2.4. </span><span class="content">Key <code>permissions</code></span><a class="self-link" href="#key-permissions"></a></h4>
   <p>This key may be present.</p>
   <h4 class="heading settled" data-level="2.2.5" id="key-optional_permissions"><span class="secno">2.2.5. </span><span class="content">Key <code>optional_permissions</code></span><a class="self-link" href="#key-optional_permissions"></a></h4>
   <p>This key may be present.</p>
   <h4 class="heading settled" data-level="2.2.6" id="key-host_permissions"><span class="secno">2.2.6. </span><span class="content">Key <code>host_permissions</code></span><a class="self-link" href="#key-host_permissions"></a></h4>
   <p>This key may be present.</p>
   <h4 class="heading settled" data-level="2.2.7" id="key-optional_host_permissions"><span class="secno">2.2.7. </span><span class="content">Key <code>optional_host_permissions</code></span><a class="self-link" href="#key-optional_host_permissions"></a></h4>
   <p>This key may be present.</p>
   <h4 class="heading settled" data-level="2.2.8" id="key-default_locale"><span class="secno">2.2.8. </span><span class="content">Key <code>default_locale</code></span><a class="self-link" href="#key-default_locale"></a></h4>
   <p>This key must be present if the <code>_locales</code> subdirectory is present, must be absent otherwise.</p>
   <h4 class="heading settled" data-level="2.2.9" id="key-background"><span class="secno">2.2.9. </span><span class="content">Key <code>background</code></span><a class="self-link" href="#key-background"></a></h4>
   <p>This key may be present.</p>
   <h4 class="heading settled" data-level="2.2.10" id="key-commands"><span class="secno">2.2.10. </span><span class="content">Key <code>commands</code></span><a class="self-link" href="#key-commands"></a></h4>
   <p>This key may be present.</p>
   <h4 class="heading settled" data-level="2.2.11" id="key-content_scripts"><span class="secno">2.2.11. </span><span class="content">Key <code>content_scripts</code></span><a class="self-link" href="#key-content_scripts"></a></h4>
   <p>This key may be present.</p>
   <h4 class="heading settled" data-level="2.2.12" id="key-content_security_policy"><span class="secno">2.2.12. </span><span class="content">Key <code>content_security_policy</code></span><a class="self-link" href="#key-content_security_policy"></a></h4>
   <p>This key may be present.</p>
   <h4 class="heading settled" data-level="2.2.13" id="key-description"><span class="secno">2.2.13. </span><span class="content">Key <code>description</code></span><a class="self-link" href="#key-description"></a></h4>
   <p>This key may be present.</p>
   <h4 class="heading settled" data-level="2.2.14" id="key-icons"><span class="secno">2.2.14. </span><span class="content">Key <code>icons</code></span><a class="self-link" href="#key-icons"></a></h4>
   <p>This key may be present.</p>
   <h4 class="heading settled" data-level="2.2.15" id="key-options_ui"><span class="secno">2.2.15. </span><span class="content">Key <code>options_ui</code></span><a class="self-link" href="#key-options_ui"></a></h4>
   <p>This key may be present.</p>
   <h4 class="heading settled" data-level="2.2.16" id="key-short_name"><span class="secno">2.2.16. </span><span class="content">Key <code>short_name</code></span><a class="self-link" href="#key-short_name"></a></h4>
   <p>The short name of the extension. This value should be used in contexts where <a href="#key-name"><code>name</code></a> is too long to use in full. If <code>short_name</code> is not provided, manifest consumers should use a truncated version of <code>name</code>.</p>
   <p>This key may be present. This property can be localized.</p>
   <h4 class="heading settled" data-level="2.2.17" id="key-web_accessible_resources"><span class="secno">2.2.17. </span><span class="content">Key <code>web_accessible_resources</code></span><a class="self-link" href="#key-web_accessible_resources"></a></h4>
   <p>This key may be present.</p>
   <h4 class="heading settled" data-level="2.2.18" id="key-externally_connectable"><span class="secno">2.2.18. </span><span class="content">Key <code>externally_connectable</code></span><a class="self-link" href="#key-externally_connectable"></a></h4>
   <p>This key may be present.</p>
   <h4 class="heading settled" data-level="2.2.19" id="key-devtools_page"><span class="secno">2.2.19. </span><span class="content">Key <code>devtools_page</code></span><a class="self-link" href="#key-devtools_page"></a></h4>
   <p>This key may be present.</p>
   <h3 class="heading settled" data-level="2.3" id="reserved-file-names"><span class="secno">2.3. </span><span class="content">Reserved file names</span><a class="self-link" href="#reserved-file-names"></a></h3>
   <p>Filenames beginning with an underscore (<code>_</code>) are reserved for use by user agent.</p>
   <h2 class="heading settled" data-level="3" id="isolated-worlds"><span class="secno">3. </span><span class="content">Isolated worlds</span><a class="self-link" href="#isolated-worlds"></a></h2>
   <h2 class="heading settled" data-level="4" id="unavailable-apis"><span class="secno">4. </span><span class="content">Unavailable APIs</span><a class="self-link" href="#unavailable-apis"></a></h2>
   <h2 class="heading settled" data-level="5" id="the-browser-global"><span class="secno">5. </span><span class="content">The <code>browser</code> global</span><a class="self-link" href="#the-browser-global"></a></h2>
   <h2 class="heading settled" data-level="6" id="extension-origin"><span class="secno">6. </span><span class="content">Extension origin</span><a class="self-link" href="#extension-origin"></a></h2>
   <h2 class="heading settled" data-level="7" id="localization"><span class="secno">7. </span><span class="content">Localization</span><a class="self-link" href="#localization"></a></h2>
   <p>The _locales subdirectory of a WebExtension can contain strings for internationalization purposes.</p>
   <p class="issue" id="issue-e5b8cfc7"><a class="self-link" href="#issue-e5b8cfc7"></a> Specify localization handling. <a href="https://github.com/w3c/webextensions/issues/62">[Issue #62]</a></p>
   <h2 class="heading settled" data-level="8" id="host-permissions"><span class="secno">8. </span><span class="content">Host permissions</span><a class="self-link" href="#host-permissions"></a></h2>
   <h3 class="heading settled" data-level="8.1" id="cross-origin-fetch"><span class="secno">8.1. </span><span class="content">Cross-origin fetch</span><a class="self-link" href="#cross-origin-fetch"></a></h3>
   <h2 class="heading settled" data-level="9" id="match-patterns"><span class="secno">9. </span><span class="content">Match patterns</span><a class="self-link" href="#match-patterns"></a></h2>
   <h2 class="heading settled" data-level="10" id="concepts"><span class="secno">10. </span><span class="content">Concepts</span><a class="self-link" href="#concepts"></a></h2>
   <h3 class="heading settled" data-level="10.1" id="uniqueness-of-extension-ids"><span class="secno">10.1. </span><span class="content">Uniqueness of extension IDs</span><a class="self-link" href="#uniqueness-of-extension-ids"></a></h3>
   <h3 class="heading settled" data-level="10.2" id="promises-and-callbacks"><span class="secno">10.2. </span><span class="content">Promises and callbacks</span><a class="self-link" href="#promises-and-callbacks"></a></h3>
   <h3 class="heading settled" data-level="10.3" id="user-gestures-and-activetab"><span class="secno">10.3. </span><span class="content">User gestures and activeTab</span><a class="self-link" href="#user-gestures-and-activetab"></a></h3>
   <h3 class="heading settled" data-level="10.4" id="extension-permissions-and-web-perissions"><span class="secno">10.4. </span><span class="content">Extension permissions and web perissions</span><a class="self-link" href="#extension-permissions-and-web-perissions"></a></h3>
   <h2 class="heading settled" data-level="11" id="content-security-policy"><span class="secno">11. </span><span class="content">Content security policy</span><a class="self-link" href="#content-security-policy"></a></h2>
   <h2 class="heading settled" data-level="12" id="architecture"><span class="secno">12. </span><span class="content">Architecture</span><a class="self-link" href="#architecture"></a></h2>
   <h3 class="heading settled" data-level="12.1" id="background-content"><span class="secno">12.1. </span><span class="content">Background content</span><a class="self-link" href="#background-content"></a></h3>
   <h3 class="heading settled" data-level="12.2" id="content-scripts"><span class="secno">12.2. </span><span class="content">Content scripts</span><a class="self-link" href="#content-scripts"></a></h3>
   <h4 class="heading settled" data-level="12.2.1" id="isolated-worlds①"><span class="secno">12.2.1. </span><span class="content">Isolated worlds</span><a class="self-link" href="#isolated-worlds①"></a></h4>
   <h3 class="heading settled" data-level="12.3" id="extension-pages"><span class="secno">12.3. </span><span class="content">Extension pages</span><a class="self-link" href="#extension-pages"></a></h3>
   <h2 class="heading settled" data-level="13" id="classes-of-security-risk"><span class="secno">13. </span><span class="content">Classes of security risk</span><a class="self-link" href="#classes-of-security-risk"></a></h2>
   <h2 class="heading settled" data-level="14" id="web-accessible-resources"><span class="secno">14. </span><span class="content">Web accessible resources</span><a class="self-link" href="#web-accessible-resources"></a></h2>
   <h2 class="heading settled" data-level="15" id="interaction-with-the-web"><span class="secno">15. </span><span class="content">Interaction with the web</span><a class="self-link" href="#interaction-with-the-web"></a></h2>
   <h3 class="heading settled" data-level="15.1" id="current-behavior-of-cookie-partitioning"><span class="secno">15.1. </span><span class="content">Current behavior of cookie partitioning</span><a class="self-link" href="#current-behavior-of-cookie-partitioning"></a></h3>
   <h2 class="heading settled" data-level="16" id="version-number-handling"><span class="secno">16. </span><span class="content">Version number handling</span><a class="self-link" href="#version-number-handling"></a></h2>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
  </div>
<script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-json">[JSON]
   <dd>T. Bray, Ed.. <a href="https://www.rfc-editor.org/rfc/rfc8259"><cite>The JavaScript Object Notation (JSON) Data Interchange Format</cite></a>. December 2017. Internet Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc8259">https://www.rfc-editor.org/rfc/rfc8259</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Specify localization handling. <a href="https://github.com/w3c/webextensions/issues/62">[Issue #62]</a> <a class="issue-return" href="#issue-e5b8cfc7" title="Jump to section">↵</a></div>
  </div>